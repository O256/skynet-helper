## main

指明了该插件的主入口在哪，只有找到主入口整个项目才能正常的运转、

## activationEvents

指明该插件在何种情况下才会被激活，因为只有激活后插件才能被正常使用，官网已经指明了激活的时机，这样我们就可以按需设置对应时机。(具体每个时机用的时候详细查看即可)

onLanguage 打开解析为特定语言文件时被激活，例如"onLanguage:python"
onCommand 在调用命令时被激活
onDebug 在启动调试话之前被激活
onDebugInitialConfigurations
onDebugResolve
workspaceContains 每当打开文件夹并且该文件夹包含至少一个与 glob 模式匹配的文件时
onFileSystem 每当读取来自特定方案的文件或文件夹时
onView 每当在 VS Code 侧栏中展开指定 id 的视图
onUri 每当打开该扩展的系统范围的 Uri 时
onWebviewPanel
onCustomEditor
onAuthenticationRequest
* 只要一启动vscode，插件就会被激活
onStartupFinished

## contributes

通过扩展注册contributes用来扩展Visual Studio Code中的各项技能，其有多个配置，如下所示：

breakpoints 断点
colors 主题颜色
commands 命令
configuration 配置
configurationDefaults 默认的特定于语言的编辑器配置
customEditors 自定义编辑器
debuggers 调试适配器
grammars
iconThemes
jsonValidation
keybindings 快捷键绑定
languages
menus
problemMatchers
problemPatterns
productIconThemes
resourceLabelFormatters
snippets 特定语言的片段
submenus
taskDefinitions
themes 颜色主题
typescriptServerPlugins
views
viewsContainers
viewsWelcome
walkthroughs
3.2.2 extension.js文件

该文件时其入口文件，即package.json中main字段对应的文件(不一定叫extension.js这个名字)，该文件中将导出两个方法：activate和deactivate，两个方法的执行时机如下所示：

activate

这是插件被激活时执行的函数

deactivate

这是插件被销毁时调用的方法，比如释放内存等。


icon尺寸
128x128

## 发布方式

vsce publish -p <personal access token>

## 插件管理页面

https://marketplace.visualstudio.com/manage/publishers/oliver256

## 日志

Debug adapter started

收到请求: {"command":"initialize","arguments":{"clientID":"vscode","clientName":"Visual Studio Code","adapterID":"skynet-helper","pathFormat":"path","linesStartAt1":true,"columnsStartAt1":true,"supportsVariableType":true,"supportsVariablePaging":true,"supportsRunInTerminalRequest":true,"locale":"en","supportsProgressReporting":true,"supportsInvalidatedEvent":true,"supportsMemoryReferences":true,"supportsArgsCanBeInterpretedByShell":true,"supportsMemoryEvent":true,"supportsStartDebuggingRequest":true,"supportsANSIStyling":true},"type":"request","seq":1}


收到请求: {"command":"launch","arguments":{"name":"SkynetHelper","type":"skynet-helper","request":"launch","workdir":"","program":"./skynet","config":"./examples/config_vsc","service":"./service","__configurationTarget":6,"__sessionId":"a31f418c-3565-4157-8ab8-3d9ebf1c570f"},"type":"request","seq":2}
收到请求: {"command":"disconnect","arguments":{"restart":false},"type":"request","seq":3}

## 执行脚本

/data/ssd/home/user00/.vscode-server/cli/servers/Stable-e3a5acfb517a443235981655413d566533107e92/server/node -e delete process.env.ELECTRON_RUN_AS_NODE;require(process.argv[1]) /data/ssd/home/user00/workspace/skynet-helper/dap/index.js

所以最终执行是在home目录下执行的, 是否可以在package.json中配置工作目录


收到调试进程消息: {"body":{"line":50,"category":"stdout","source":{"path":"/data/ssd/home/user00/bm/server/skynet/lualib/loader.lua"},"output":"2025-09-27 05:06:00.99 [:00000025] source=/data/ssd/home/user00/bm/server/service/league_mgr.lua, service=/data/ssd/home/user00/bm/server/skynet/service\n"},"type":"event","event":"output","seq":206}

收到调试进程消息: {"type":"event","body":{"reason":"breakpoint","threadId":1},"seq":468,"event":"stopped"}

收到调试进程消息: {"type":"event","body":{"category":"stdout","output":"2025-09-27 05:26:16.92 [:0000000a] \u001b[34m[INFO] ./skynet/service/vscdebugd.lua:337 debug pause,addr=39,debug_addr=nil,reason=\"breakpoint\",isterm=false\u001b[0m\n","source":{"path":"/data/ssd/home/user00/bm/server/skynet/service/vscdebugd.lua"},"line":337},"seq":467,"event":"output"}


## DEBUG CONSOLE输出

### 输出折叠日志
```lua
if #lines <= 1 then
    send_event("output", {
        category = category,
        output = header,
        source = source,
        line = tonumber(line)
    })
else
    send_event("output", {
        category = category,
        group = "startCollapsed",
        output = header,
        source = source,
        line = tonumber(line)
    })

    for i = 2, #lines do
        local content = string.format("%s%s\n", color_begin, lines[i], color_end)
        send_event("output", {
            category = category,
            output = content
        })
    end

    send_event("output", {
        category = category,
        output = "",
        group = "end"
    })
end
```

### 输出带变量的日志
```lua
if #lines <= 1 then
    send_event("output", {
        category = category,
        source = source,
        line = tonumber(line),
        output = header,
    })
else
    -- 大于1行则将日志数据存储到variables中, 并生成一个唯一id
    send_event("output", {
        category = category,
        source = source,
        line = tonumber(line),
        output = header,
        variablesReference = 10000
    })
end
```

需要注意这里的`variablesReference` 大于0的时候 表示这个日志是一个变量, 会同过`Variables`面板展示出来, 这里的值可以自定义, 只要大于0即可, 但是不能重复.
所以在输出的时候会通过这个ID请求一次`variables`请求, 这个请求会携带这个ID, 通过这个ID我们就可以知道是哪个日志的变量请求了.
如果既有output又有variablesReference, 会先输出output, 然后再输出variablesReference对应的变量.

所以在最开始需要通过id获取变量值来决定现实的方式
- 如果是当行变量, 则输出output
- 如果是多行变量, 则列表现实所有的key和value 